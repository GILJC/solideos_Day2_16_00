<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ì¶¤í˜• ì—¬í–‰ í”Œë˜ë„ˆ</title>

    <style>
        /* ê¸°ë³¸ ë¦¬ì…‹ ë° ì „ì—­ ìŠ¤íƒ€ì¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2196F3;
            --secondary-color: #FF5722;
            --accent-color: #FFC107;
            --success-color: #4CAF50;
            --danger-color: #F44336;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f5f5f5;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.2);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* í—¤ë” */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1976D2 100%);
            color: var(--white);
            padding: 30px 40px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: 'âœˆï¸';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            right: -20px;
            top: -40px;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        /* ì—¬í–‰ì§€ ì…ë ¥ í¼ */
        .trip-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .input-group input,
        .input-group select {
            padding: 12px 15px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s;
            cursor: pointer;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--white);
            background: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .input-group select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 20px;
            padding-right: 40px;
        }

        .search-btn {
            align-self: flex-end;
            padding: 12px 30px;
            background: var(--accent-color);
            color: var(--text-dark);
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .search-btn:hover {
            background: #FFB300;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* ì—¬í–‰ ì •ë³´ ìš”ì•½ */
        .trip-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px 40px;
            background: var(--bg-light);
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-card {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .summary-card h3 {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            padding: 40px;
        }

        .section {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        /* ì§€ë„ */
        #map {
            width: 100%;
            height: 400px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            background: var(--bg-light);
        }

        /* 7ì¼ ì¼ì •í‘œ */
        .itinerary {
            display: grid;
            gap: 20px;
        }

        .day-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .day-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-hover);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .day-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .day-cost {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--danger-color);
        }

        .timeline {
            display: grid;
            gap: 15px;
        }

        .timeline-item {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 15px;
            padding: 15px;
            background: var(--bg-light);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .timeline-item.meal {
            border-left-color: var(--accent-color);
        }

        .time {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .activity-details h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .activity-details p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 3px;
        }

        .activity-details .cost {
            color: var(--danger-color);
            font-weight: 600;
        }

        /* êµí†µ ì •ë³´ */
        .transport-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .transport-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .transport-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-hover);
            transform: translateY(-5px);
        }

        .transport-card.cancelled {
            border-color: var(--danger-color);
            background: linear-gradient(to right, #ffe5e5 0%, #fff 10%);
        }

        .cancelled-badge {
            display: inline-block;
            background: var(--danger-color);
            color: var(--white);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .transport-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .transport-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .transport-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .transport-details {
            display: grid;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* íƒ­ ì‹œìŠ¤í…œ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            position: relative;
            top: 2px;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        /* í‘¸í„° */
        footer {
            background: var(--text-dark);
            color: var(--white);
            text-align: center;
            padding: 20px;
            font-size: 0.9rem;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                padding: 20px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .trip-form {
                grid-template-columns: 1fr;
            }

            .trip-summary {
                grid-template-columns: repeat(2, 1fr);
                padding: 20px;
            }

            .main-content {
                padding: 20px;
            }

            .transport-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                overflow-x: auto;
            }
        }

        @media (max-width: 480px) {
            .trip-summary {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <header>
            <h1>ğŸŒ ë§ì¶¤í˜• ì—¬í–‰ í”Œë˜ë„ˆ</h1>

            <!-- ì—¬í–‰ì§€ ì„ íƒ í¼ -->
            <div class="trip-form">
                <div class="input-group">
                    <label>ğŸ“ ì¶œë°œì§€</label>
                    <select id="origin" onchange="updateTrip()">
                        <option value="seoul">ğŸ‡°ğŸ‡· ì„œìš¸ ì¸ì²œ (Seoul ICN)</option>
                        <option value="gimpo">ğŸ‡°ğŸ‡· ì„œìš¸ ê¹€í¬ (Seoul GMP)</option>
                        <option value="busan">ğŸ‡°ğŸ‡· ë¶€ì‚° (Busan)</option>
                        <option value="jeju">ğŸ‡°ğŸ‡· ì œì£¼ (Jeju)</option>
                        <option value="tokyo">ğŸ‡¯ğŸ‡µ ë„ì¿„ (Tokyo)</option>
                        <option value="osaka">ğŸ‡¯ğŸ‡µ ì˜¤ì‚¬ì¹´ (Osaka)</option>
                        <option value="beijing">ğŸ‡¨ğŸ‡³ ë² ì´ì§• (Beijing)</option>
                        <option value="shanghai">ğŸ‡¨ğŸ‡³ ìƒí•˜ì´ (Shanghai)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ğŸ“ ëª©ì ì§€</label>
                    <select id="destination" onchange="updateTrip()">
                        <option value="london">ğŸ‡¬ğŸ‡§ ëŸ°ë˜ (London)</option>
                        <option value="paris">ğŸ‡«ğŸ‡· íŒŒë¦¬ (Paris)</option>
                        <option value="newyork">ğŸ‡ºğŸ‡¸ ë‰´ìš• (New York)</option>
                        <option value="tokyo">ğŸ‡¯ğŸ‡µ ë„ì¿„ (Tokyo)</option>
                        <option value="osaka">ğŸ‡¯ğŸ‡µ ì˜¤ì‚¬ì¹´ (Osaka)</option>
                        <option value="rome">ğŸ‡®ğŸ‡¹ ë¡œë§ˆ (Rome)</option>
                        <option value="barcelona">ğŸ‡ªğŸ‡¸ ë°”ë¥´ì…€ë¡œë‚˜ (Barcelona)</option>
                        <option value="sydney">ğŸ‡¦ğŸ‡º ì‹œë“œë‹ˆ (Sydney)</option>
                        <option value="dubai">ğŸ‡¦ğŸ‡ª ë‘ë°”ì´ (Dubai)</option>
                        <option value="cebu">ğŸ‡µğŸ‡­ ì„¸ë¶€ (Cebu)</option>
                        <option value="moalboal">ğŸ‡µğŸ‡­ ëª¨ì•Œë³´ì•Œ (Moalboal)</option>
                        <option value="nhatrang">ğŸ‡»ğŸ‡³ ë‚˜íŠ¸ë‘ (Nha Trang)</option>
                        <option value="danang">ğŸ‡»ğŸ‡³ ë‹¤ë‚­ (Da Nang)</option>
                        <option value="hochiminh">ğŸ‡»ğŸ‡³ í˜¸ì¹˜ë¯¼ (Ho Chi Minh)</option>
                    </select>
                </div>
                <button class="search-btn" onclick="updateTrip()">ğŸ” ì—¬í–‰ ê³„íš ë³´ê¸°</button>
            </div>
        </header>

        <!-- ì—¬í–‰ ì •ë³´ ìš”ì•½ -->
        <section class="trip-summary">
            <div class="summary-card">
                <h3>ì´ ì—¬í–‰ ë¹„ìš©</h3>
                <div class="value" id="totalCost">ê³„ì‚° ì¤‘...</div>
            </div>
            <div class="summary-card">
                <h3>ì´ ì†Œìš” ì‹œê°„</h3>
                <div class="value" id="totalTime">ê³„ì‚° ì¤‘...</div>
            </div>
            <div class="summary-card">
                <h3>ì—¬í–‰ ê¸°ê°„</h3>
                <div class="value">7ì¼</div>
            </div>
            <div class="summary-card">
                <h3>ë°©ë¬¸ ì¥ì†Œ</h3>
                <div class="value">10ê³³</div>
            </div>
        </section>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì§€ë„ ì„¹ì…˜ -->
            <section class="section">
                <h2>ğŸ—ºï¸ ì—¬í–‰ ê²½ë¡œ</h2>
                <div id="map">
                    <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; background: var(--bg-light);">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ—ºï¸</div>
                        <h3 style="margin-bottom: 10px; color: var(--text-dark);">ì§€ë„ ë¯¸ë¦¬ë³´ê¸°</h3>
                        <p style="color: var(--text-light); text-align: center;">
                            <span id="mapRoute">ì„œìš¸ â†’ ëŸ°ë˜</span> ê²½ë¡œ
                        </p>
                    </div>
                </div>
            </section>

            <!-- êµ­ì œ êµí†µ ì„¹ì…˜ -->
            <section class="section">
                <h2>âœˆï¸ êµ­ì œ êµí†µí¸</h2>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('roundtrip-flights')">ì™•ë³µ í•­ê³µí¸</button>
                    <button class="tab" onclick="switchTab('oneway-flights')">í¸ë„ í•­ê³µí¸</button>
                    <button class="tab" onclick="switchTab('international-trains')">êµ­ì œ ê¸°ì°¨</button>
                </div>

                <div id="roundtrip-flights" class="tab-content active">
                    <div class="transport-grid" id="roundtripFlightsGrid"></div>
                </div>

                <div id="oneway-flights" class="tab-content">
                    <div class="transport-grid" id="onewayFlightsGrid"></div>
                </div>

                <div id="international-trains" class="tab-content">
                    <div class="transport-grid" id="trainsGrid"></div>
                </div>
            </section>

            <!-- 7ì¼ ì¼ì •í‘œ -->
            <section class="section">
                <h2>ğŸ“… 7ì¼ ì—¬í–‰ ì¼ì • (ì‹œê°„ë³„)</h2>
                <div class="itinerary" id="itineraryGrid"></div>
            </section>

            <!-- ëŸ°ë˜ í˜„ì§€ êµí†µ -->
            <section class="section">
                <h2>ğŸš‡ ëŸ°ë˜ í˜„ì§€ êµí†µ</h2>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('local-tube')">ì§€í•˜ì²  (Tube)</button>
                    <button class="tab" onclick="switchTab('local-bus')">ë²„ìŠ¤</button>
                    <button class="tab" onclick="switchTab('local-taxi')">íƒì‹œ/ìš°ë²„</button>
                </div>

                <div id="local-tube" class="tab-content active">
                    <div class="transport-grid" id="tubeGrid"></div>
                </div>

                <div id="local-bus" class="tab-content">
                    <div class="transport-grid" id="busGrid"></div>
                </div>

                <div id="local-taxi" class="tab-content">
                    <div class="transport-grid" id="taxiGrid"></div>
                </div>
            </section>
        </div>

        <!-- í‘¸í„° -->
        <footer>
            <p>Â© 2024 ë§ì¶¤í˜• ì—¬í–‰ í”Œë˜ë„ˆ | ëª¨ë“  ì •ë³´ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤</p>
        </footer>
    </div>

    <script>
        // ==================== ë°ì´í„° ì •ì˜ ====================

        // ë„ì‹œ ë°ì´í„°ë² ì´ìŠ¤
        const cities = {
            // ì¶œë°œì§€
            seoul: { name: 'ì„œìš¸(ì¸ì²œ)', nameEn: 'Seoul ICN', country: 'í•œêµ­', lat: 37.5665, lng: 126.9780, airport: 'ì¸ì²œêµ­ì œê³µí•­' },
            gimpo: { name: 'ì„œìš¸(ê¹€í¬)', nameEn: 'Seoul GMP', country: 'í•œêµ­', lat: 37.5583, lng: 126.7906, airport: 'ê¹€í¬êµ­ì œê³µí•­' },
            busan: { name: 'ë¶€ì‚°', nameEn: 'Busan', country: 'í•œêµ­', lat: 35.1796, lng: 129.0756, airport: 'ê¹€í•´êµ­ì œê³µí•­' },
            jeju: { name: 'ì œì£¼', nameEn: 'Jeju', country: 'í•œêµ­', lat: 33.4996, lng: 126.5312, airport: 'ì œì£¼êµ­ì œê³µí•­' },
            tokyo: { name: 'ë„ì¿„', nameEn: 'Tokyo', country: 'ì¼ë³¸', lat: 35.6762, lng: 139.6503, airport: 'ë‚˜ë¦¬íƒ€êµ­ì œê³µí•­' },
            osaka: { name: 'ì˜¤ì‚¬ì¹´', nameEn: 'Osaka', country: 'ì¼ë³¸', lat: 34.6937, lng: 135.5023, airport: 'ê°„ì‚¬ì´êµ­ì œê³µí•­' },
            beijing: { name: 'ë² ì´ì§•', nameEn: 'Beijing', country: 'ì¤‘êµ­', lat: 39.9042, lng: 116.4074, airport: 'ë² ì´ì§• ì„œìš°ë‘ ê³µí•­' },
            shanghai: { name: 'ìƒí•˜ì´', nameEn: 'Shanghai', country: 'ì¤‘êµ­', lat: 31.2304, lng: 121.4737, airport: 'í‘¸ë‘¥êµ­ì œê³µí•­' },
            // ëª©ì ì§€
            london: { name: 'ëŸ°ë˜', nameEn: 'London', country: 'ì˜êµ­', lat: 51.5074, lng: -0.1278, airport: 'íˆë“œë¡œê³µí•­' },
            paris: { name: 'íŒŒë¦¬', nameEn: 'Paris', country: 'í”„ë‘ìŠ¤', lat: 48.8566, lng: 2.3522, airport: 'ìƒ¤ë¥¼ë“œê³¨ê³µí•­' },
            newyork: { name: 'ë‰´ìš•', nameEn: 'New York', country: 'ë¯¸êµ­', lat: 40.7128, lng: -74.0060, airport: 'JFK êµ­ì œê³µí•­' },
            rome: { name: 'ë¡œë§ˆ', nameEn: 'Rome', country: 'ì´íƒˆë¦¬ì•„', lat: 41.9028, lng: 12.4964, airport: 'í”¼ìš°ë¯¸ì¹˜ë…¸ê³µí•­' },
            barcelona: { name: 'ë°”ë¥´ì…€ë¡œë‚˜', nameEn: 'Barcelona', country: 'ìŠ¤í˜ì¸', lat: 41.3851, lng: 2.1734, airport: 'ì—˜í”„ë¼íŠ¸ê³µí•­' },
            sydney: { name: 'ì‹œë“œë‹ˆ', nameEn: 'Sydney', country: 'í˜¸ì£¼', lat: -33.8688, lng: 151.2093, airport: 'ì‹œë“œë‹ˆ í‚¹ìŠ¤í¬ë“œ ìŠ¤ë¯¸ìŠ¤ ê³µí•­' },
            dubai: { name: 'ë‘ë°”ì´', nameEn: 'Dubai', country: 'UAE', lat: 25.2048, lng: 55.2708, airport: 'ë‘ë°”ì´êµ­ì œê³µí•­' },
            // ë™ë‚¨ì•„ì‹œì•„ ëª©ì ì§€
            cebu: { name: 'ì„¸ë¶€', nameEn: 'Cebu', country: 'í•„ë¦¬í•€', lat: 10.3157, lng: 123.8854, airport: 'ë§‰íƒ„-ì„¸ë¶€ êµ­ì œê³µí•­' },
            moalboal: { name: 'ëª¨ì•Œë³´ì•Œ', nameEn: 'Moalboal', country: 'í•„ë¦¬í•€', lat: 9.9469, lng: 123.3931, airport: 'ë§‰íƒ„-ì„¸ë¶€ êµ­ì œê³µí•­ (ì„¸ë¶€ ê²½ìœ )' },
            nhatrang: { name: 'ë‚˜íŠ¸ë‘', nameEn: 'Nha Trang', country: 'ë² íŠ¸ë‚¨', lat: 12.2388, lng: 109.1967, airport: 'ê¹œë¼ì¸ êµ­ì œê³µí•­' },
            danang: { name: 'ë‹¤ë‚­', nameEn: 'Da Nang', country: 'ë² íŠ¸ë‚¨', lat: 16.0544, lng: 108.2022, airport: 'ë‹¤ë‚­ êµ­ì œê³µí•­' },
            hochiminh: { name: 'í˜¸ì¹˜ë¯¼', nameEn: 'Ho Chi Minh', country: 'ë² íŠ¸ë‚¨', lat: 10.8231, lng: 106.6297, airport: 'ë–¤ì„ ë…“ êµ­ì œê³µí•­' }
        };

        // í˜„ì¬ ì„ íƒëœ ì—¬í–‰
        let currentTrip = {
            origin: 'seoul',
            destination: 'london'
        };

        // í¸ë„ í•­ê³µí¸ ë°ì´í„° ìƒì„± í•¨ìˆ˜
        function generateOnewayFlightData(origin, destination) {
            const originCity = cities[origin];
            const destCity = cities[destination];

            // ê±°ë¦¬ ê¸°ë°˜ ëŒ€ëµì ì¸ ë¹„ìš© ë° ì‹œê°„ ê³„ì‚°
            const latDiff = Math.abs(originCity.lat - destCity.lat);
            const lngDiff = Math.abs(originCity.lng - destCity.lng);
            const distance = Math.sqrt(latDiff * latDiff + lngDiff * lngDiff) * 111; // kmë¡œ ë³€í™˜

            const basePrice = Math.floor(distance * 100 + Math.random() * 200000);
            const flightHours = Math.floor(distance / 800 * 60); // ì‹œê°„(ë¶„)

            return [
                {
                    id: 1,
                    name: 'Korean Air',
                    icon: 'âœˆï¸',
                    price: basePrice + 100000,
                    priceStr: 'â‚©' + (basePrice + 100000).toLocaleString(),
                    duration: `${Math.floor(flightHours/60)}ì‹œê°„ ${flightHours%60}ë¶„`,
                    durationMin: flightHours,
                    details: `${originCity.airport} â†’ ${destCity.airport} ì§í•­`,
                    cancelled: true,
                    cancelReason: 'ì¢Œì„ ì·¨ì†Œ ë°œìƒ - ì¦‰ì‹œ ì˜ˆì•½ ê°€ëŠ¥!',
                    tripType: 'í¸ë„'
                },
                {
                    id: 2,
                    name: 'Asiana Airlines',
                    icon: 'âœˆï¸',
                    price: basePrice - 50000,
                    priceStr: 'â‚©' + (basePrice - 50000).toLocaleString(),
                    duration: `${Math.floor((flightHours+30)/60)}ì‹œê°„ ${(flightHours+30)%60}ë¶„`,
                    durationMin: flightHours + 30,
                    details: `${originCity.airport} â†’ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'í¸ë„'
                },
                {
                    id: 3,
                    name: 'Jeju Air',
                    icon: 'âœˆï¸',
                    price: Math.floor(basePrice * 0.7),
                    priceStr: 'â‚©' + Math.floor(basePrice * 0.7).toLocaleString(),
                    duration: `${Math.floor((flightHours+45)/60)}ì‹œê°„ ${(flightHours+45)%60}ë¶„`,
                    durationMin: flightHours + 45,
                    details: `${originCity.airport} â†’ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'í¸ë„'
                },
                {
                    id: 4,
                    name: 'Air Seoul',
                    icon: 'âœˆï¸',
                    price: Math.floor(basePrice * 0.65),
                    priceStr: 'â‚©' + Math.floor(basePrice * 0.65).toLocaleString(),
                    duration: `${Math.floor((flightHours+60)/60)}ì‹œê°„ ${(flightHours+60)%60}ë¶„`,
                    durationMin: flightHours + 60,
                    details: `${originCity.airport} â†’ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'í¸ë„'
                }
            ];
        }

        // ì™•ë³µ í•­ê³µí¸ ë°ì´í„° ìƒì„± í•¨ìˆ˜
        function generateRoundtripFlightData(origin, destination) {
            const originCity = cities[origin];
            const destCity = cities[destination];

            // ê±°ë¦¬ ê¸°ë°˜ ëŒ€ëµì ì¸ ë¹„ìš© ë° ì‹œê°„ ê³„ì‚°
            const latDiff = Math.abs(originCity.lat - destCity.lat);
            const lngDiff = Math.abs(originCity.lng - destCity.lng);
            const distance = Math.sqrt(latDiff * latDiff + lngDiff * lngDiff) * 111; // kmë¡œ ë³€í™˜

            const basePrice = Math.floor(distance * 100 + Math.random() * 200000);
            const flightHours = Math.floor(distance / 800 * 60); // ì‹œê°„(ë¶„)

            // ì™•ë³µì€ í¸ë„ ê°€ê²©ì˜ 1.8ë°° (í• ì¸ ì ìš©)
            const roundtripMultiplier = 1.8;

            return [
                {
                    id: 1,
                    name: 'Korean Air',
                    icon: 'âœˆï¸',
                    price: Math.floor((basePrice + 100000) * roundtripMultiplier),
                    priceStr: 'â‚©' + Math.floor((basePrice + 100000) * roundtripMultiplier).toLocaleString(),
                    duration: `${Math.floor(flightHours/60)}ì‹œê°„ ${flightHours%60}ë¶„ (í¸ë„)`,
                    durationMin: flightHours,
                    details: `ì™•ë³µ | ${originCity.airport} â‡„ ${destCity.airport} ì§í•­`,
                    cancelled: true,
                    cancelReason: 'ì™•ë³µ íŠ¹ê°€! ì¢Œì„ ì·¨ì†Œ ë°œìƒ',
                    tripType: 'ì™•ë³µ'
                },
                {
                    id: 2,
                    name: 'Asiana Airlines',
                    icon: 'âœˆï¸',
                    price: Math.floor((basePrice - 50000) * roundtripMultiplier),
                    priceStr: 'â‚©' + Math.floor((basePrice - 50000) * roundtripMultiplier).toLocaleString(),
                    duration: `${Math.floor((flightHours+30)/60)}ì‹œê°„ ${(flightHours+30)%60}ë¶„ (í¸ë„)`,
                    durationMin: flightHours + 30,
                    details: `ì™•ë³µ | ${originCity.airport} â‡„ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'ì™•ë³µ'
                },
                {
                    id: 3,
                    name: 'Jeju Air',
                    icon: 'âœˆï¸',
                    price: Math.floor(basePrice * 0.7 * roundtripMultiplier),
                    priceStr: 'â‚©' + Math.floor(basePrice * 0.7 * roundtripMultiplier).toLocaleString(),
                    duration: `${Math.floor((flightHours+45)/60)}ì‹œê°„ ${(flightHours+45)%60}ë¶„ (í¸ë„)`,
                    durationMin: flightHours + 45,
                    details: `ì™•ë³µ | ${originCity.airport} â‡„ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'ì™•ë³µ'
                },
                {
                    id: 4,
                    name: 'Air Seoul',
                    icon: 'âœˆï¸',
                    price: Math.floor(basePrice * 0.65 * roundtripMultiplier),
                    priceStr: 'â‚©' + Math.floor(basePrice * 0.65 * roundtripMultiplier).toLocaleString(),
                    duration: `${Math.floor((flightHours+60)/60)}ì‹œê°„ ${(flightHours+60)%60}ë¶„ (í¸ë„)`,
                    durationMin: flightHours + 60,
                    details: `ì™•ë³µ | ${originCity.airport} â‡„ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'ì™•ë³µ'
                },
                {
                    id: 5,
                    name: 'T\'way Air',
                    icon: 'âœˆï¸',
                    price: Math.floor(basePrice * 0.6 * roundtripMultiplier),
                    priceStr: 'â‚©' + Math.floor(basePrice * 0.6 * roundtripMultiplier).toLocaleString(),
                    duration: `${Math.floor((flightHours+75)/60)}ì‹œê°„ ${(flightHours+75)%60}ë¶„ (í¸ë„)`,
                    durationMin: flightHours + 75,
                    details: `ì™•ë³µ | ${originCity.airport} â‡„ ${destCity.airport} ì§í•­`,
                    cancelled: false,
                    tripType: 'ì™•ë³µ'
                }
            ];
        }

        // í•­ê³µí¸ ë°ì´í„° (ë™ì  ìƒì„±)
        let onewayFlightsData = generateOnewayFlightData('seoul', 'london');
        let roundtripFlightsData = generateRoundtripFlightData('seoul', 'london');

        // êµ­ì œ ê¸°ì°¨ ë°ì´í„°
        const trainsData = [
            {
                id: 1,
                name: 'Eurostar',
                icon: 'ğŸš„',
                price: 180000,
                priceStr: 'â‚©180,000',
                duration: '2ì‹œê°„ 20ë¶„',
                durationMin: 140,
                details: 'íŒŒë¦¬ ë¶ì—­ â†’ ëŸ°ë˜ ì„¸ì¸íŠ¸ íŒí¬ë¼ìŠ¤',
                note: 'â€» íŒŒë¦¬ê¹Œì§€ ë³„ë„ ì´ë™ í•„ìš”'
            }
        ];

        // ëŸ°ë˜ ì§€í•˜ì²  ë°ì´í„°
        const tubeData = [
            {
                id: 1,
                name: 'Oyster Card (7ì¼ íŒ¨ìŠ¤)',
                icon: 'ğŸš‡',
                price: 50000,
                priceStr: 'Â£38 (ì•½ â‚©50,000)',
                duration: 'í‰ê·  20-30ë¶„/êµ¬ê°„',
                details: 'ëŸ°ë˜ ì „ì—­ Zone 1-2 ë¬´ì œí•œ ì´ìš©'
            },
            {
                id: 2,
                name: 'ë‹¨ì¼ êµ¬ê°„ê¶Œ',
                icon: 'ğŸš‡',
                price: 3800,
                priceStr: 'Â£2.90 (ì•½ â‚©3,800)',
                duration: 'í‰ê·  20-30ë¶„',
                details: 'Zone 1-2 ë‚´ ë‹¨ì¼ êµ¬ê°„'
            }
        ];

        // ëŸ°ë˜ ë²„ìŠ¤ ë°ì´í„°
        const busData = [
            {
                id: 1,
                name: 'ëŸ°ë˜ ë²„ìŠ¤ (1ì¼ê¶Œ)',
                icon: 'ğŸšŒ',
                price: 7000,
                priceStr: 'Â£5.25 (ì•½ â‚©7,000)',
                duration: 'í‰ê·  30-45ë¶„/êµ¬ê°„',
                details: 'ëŸ°ë˜ ì „ì—­ ë²„ìŠ¤ ë¬´ì œí•œ ì´ìš©'
            },
            {
                id: 2,
                name: 'ëŸ°ë˜ ë²„ìŠ¤ (ë‹¨ì¼)',
                icon: 'ğŸšŒ',
                price: 2000,
                priceStr: 'Â£1.75 (ì•½ â‚©2,000)',
                duration: 'í‰ê·  30-45ë¶„',
                details: '1íšŒ ìŠ¹ì°¨ê¶Œ'
            }
        ];

        // íƒì‹œ ë°ì´í„°
        const taxiData = [
            {
                id: 1,
                name: 'ë¸”ë™ìº¡ (Black Cab)',
                icon: 'ğŸš•',
                price: 25000,
                priceStr: 'Â£15-20 (ì•½ â‚©20,000-25,000)',
                duration: '15-30ë¶„ (ì‹œë‚´ ê¸°ì¤€)',
                details: 'ëŸ°ë˜ ì „í†µ íƒì‹œ, ê¸°ë³¸ ìš”ê¸ˆ + ê±°ë¦¬/ì‹œê°„ ì¶”ê°€'
            },
            {
                id: 2,
                name: 'Uber',
                icon: 'ğŸš—',
                price: 15000,
                priceStr: 'Â£10-15 (ì•½ â‚©13,000-20,000)',
                duration: '15-30ë¶„ (ì‹œë‚´ ê¸°ì¤€)',
                details: 'ì•± ê¸°ë°˜ ì°¨ëŸ‰ ê³µìœ  ì„œë¹„ìŠ¤'
            }
        ];

        // 7ì¼ ì¼ì • ë°ì´í„°
        const itineraryData = [
            {
                day: 1,
                title: 'Day 1 - ë„ì°© ë° ì‹œë‚´ íƒë°©',
                activities: [
                    { time: '08:00', type: 'transport', name: 'ì¸ì²œê³µí•­ ì¶œë°œ', description: 'Korean Air KE907', cost: 850000, duration: 690 },
                    { time: '12:30', type: 'arrival', name: 'ëŸ°ë˜ íˆë“œë¡œê³µí•­ ë„ì°©', description: 'ì…êµ­ ìˆ˜ì† ë° í˜¸í…” ì²´í¬ì¸', cost: 0, duration: 120 },
                    { time: '15:00', type: 'meal', name: 'ì ì‹¬ - Borough Market', description: 'ëŸ°ë˜ ìµœê³ ì˜ í‘¸ë“œ ë§ˆì¼“ì—ì„œ ë‹¤ì–‘í•œ ìŒì‹ ì²´í—˜', cost: 25000, duration: 90 },
                    { time: '17:00', type: 'attraction', name: 'íƒ€ì›Œ ë¸Œë¦¬ì§€', description: 'ëŸ°ë˜ì˜ ìƒì§•ì ì¸ ë‹¤ë¦¬ ë°©ë¬¸ ë° ì‚¬ì§„ ì´¬ì˜', cost: 15000, duration: 90 },
                    { time: '19:00', type: 'meal', name: 'ì €ë… - Flat Iron Square', description: 'ê°€ì„±ë¹„ ì¢‹ì€ ìŠ¤í…Œì´í¬ ì €ë…', cost: 35000, duration: 90 }
                ]
            },
            {
                day: 2,
                title: 'Day 2 - ë°•ë¬¼ê´€ & ë¬¸í™” íˆ¬ì–´',
                activities: [
                    { time: '09:00', type: 'meal', name: 'ì•„ì¹¨ - í˜¸í…” ì¡°ì‹', description: 'í˜¸í…”ì—ì„œ ì—¬ìœ ë¡œìš´ ì•„ì¹¨', cost: 15000, duration: 60 },
                    { time: '10:30', type: 'attraction', name: 'ëŒ€ì˜ë°•ë¬¼ê´€', description: 'ì„¸ê³„ ìµœëŒ€ ë°•ë¬¼ê´€ ê´€ëŒ (ì…ì¥ ë¬´ë£Œ)', cost: 0, duration: 180 },
                    { time: '14:00', type: 'meal', name: 'ì ì‹¬ - Dishoom', description: 'ë­„ë°”ì´ ìŠ¤íƒ€ì¼ ì¸ë„ ìš”ë¦¬', cost: 30000, duration: 90 },
                    { time: '16:00', type: 'attraction', name: 'ì½”ë²¤íŠ¸ ê°€ë“ ', description: 'ì‡¼í•‘ ë° ê±°ë¦¬ ê³µì—° ê´€ëŒ', cost: 50000, duration: 120 },
                    { time: '19:00', type: 'meal', name: 'ì €ë… - Padella', description: 'ìˆ˜ì œ íŒŒìŠ¤íƒ€ ë ˆìŠ¤í† ë‘', cost: 28000, duration: 90 }
                ]
            },
            {
                day: 3,
                title: 'Day 3 - ì™•ì‹¤ íˆ¬ì–´',
                activities: [
                    { time: '08:30', type: 'meal', name: 'ì•„ì¹¨ - í˜¸í…” ì¡°ì‹', description: 'í˜¸í…”ì—ì„œ ì•„ì¹¨ ì‹ì‚¬', cost: 15000, duration: 60 },
                    { time: '10:00', type: 'attraction', name: 'ë²„í‚¹ì—„ ê¶ì „', description: 'ìœ„ë³‘ êµëŒ€ì‹ ê´€ëŒ', cost: 0, duration: 90 },
                    { time: '12:00', type: 'meal', name: 'ì ì‹¬ - Sketch', description: 'ë¯¸ìŠë­ ë ˆìŠ¤í† ë‘ ì• í”„í„°ëˆˆ í‹°', cost: 80000, duration: 120 },
                    { time: '14:30', type: 'attraction', name: 'í•˜ì´ë“œ íŒŒí¬', description: 'ëŸ°ë˜ ìµœëŒ€ ê³µì›ì—ì„œ ì‚°ì±…', cost: 0, duration: 120 },
                    { time: '17:00', type: 'attraction', name: 'ë¹…ë²¤ & êµ­íšŒì˜ì‚¬ë‹¹', description: 'ëŸ°ë˜ ì•„ì´ì½˜ ë°©ë¬¸', cost: 0, duration: 90 },
                    { time: '19:00', type: 'meal', name: 'ì €ë… - Honest Burgers', description: 'ìˆ˜ì œ ë²„ê±° ì „ë¬¸ì ', cost: 25000, duration: 75 }
                ]
            },
            {
                day: 4,
                title: 'Day 4 - í•´ë¦¬í¬í„° íˆ¬ì–´',
                activities: [
                    { time: '08:00', type: 'meal', name: 'ì•„ì¹¨ - í˜¸í…” ì¡°ì‹', description: 'í˜¸í…”ì—ì„œ ì•„ì¹¨ ì‹ì‚¬', cost: 15000, duration: 60 },
                    { time: '09:30', type: 'attraction', name: 'í•´ë¦¬í¬í„° ìŠ¤íŠœë””ì˜¤ íˆ¬ì–´', description: 'ì´¬ì˜ ì„¸íŠ¸ì™€ ì†Œí’ˆ ê´€ëŒ', cost: 70000, duration: 300 },
                    { time: '15:00', type: 'meal', name: 'ì ì‹¬ - ìŠ¤íŠœë””ì˜¤ ì¹´í˜', description: 'í•´ë¦¬í¬í„° í…Œë§ˆ ë ˆìŠ¤í† ë‘', cost: 35000, duration: 90 },
                    { time: '17:00', type: 'attraction', name: 'ìº ë“  ë§ˆì¼“', description: 'ë¹ˆí‹°ì§€ ì‡¼í•‘ ë° ê¸¸ê±°ë¦¬ ìŒì‹', cost: 40000, duration: 150 },
                    { time: '20:00', type: 'meal', name: 'ì €ë… - Bao Soho', description: 'íƒ€ì´ì™„ ì°ë¹µ ì „ë¬¸ì ', cost: 22000, duration: 75 }
                ]
            },
            {
                day: 5,
                title: 'Day 5 - í˜„ëŒ€ ì˜ˆìˆ  & í…œì¦ˆê°•',
                activities: [
                    { time: '09:30', type: 'meal', name: 'ì•„ì¹¨ - í˜¸í…” ì¡°ì‹', description: 'í˜¸í…”ì—ì„œ ì•„ì¹¨ ì‹ì‚¬', cost: 15000, duration: 60 },
                    { time: '11:00', type: 'attraction', name: 'í…Œì´íŠ¸ ëª¨ë˜', description: 'í˜„ëŒ€ë¯¸ìˆ ê´€ ê´€ëŒ (ì…ì¥ ë¬´ë£Œ)', cost: 0, duration: 150 },
                    { time: '14:00', type: 'meal', name: 'ì ì‹¬ - Borough Market', description: 'ë‹¤ì–‘í•œ ì„¸ê³„ ìŒì‹ ì²´í—˜', cost: 28000, duration: 90 },
                    { time: '16:00', type: 'attraction', name: 'ëŸ°ë˜ ì•„ì´', description: 'ëŒ€ê´€ëŒì°¨ì—ì„œ ëŸ°ë˜ ì „ê²½ ê°ìƒ', cost: 45000, duration: 60 },
                    { time: '18:00', type: 'meal', name: 'ì €ë… - Duck & Waffle', description: '40ì¸µ ë†’ì´ ë ˆìŠ¤í† ë‘', cost: 75000, duration: 120 }
                ]
            },
            {
                day: 6,
                title: 'Day 6 - ììœ  ì‹œê°„ & ì‡¼í•‘',
                activities: [
                    { time: '10:00', type: 'meal', name: 'ë¸ŒëŸ°ì¹˜ - Hoppers', description: 'ìŠ¤ë¦¬ë‘ì¹´ ìš”ë¦¬ ë¸ŒëŸ°ì¹˜', cost: 30000, duration: 90 },
                    { time: '12:00', type: 'attraction', name: 'ì˜¥ìŠ¤í¬ë“œ ìŠ¤íŠ¸ë¦¬íŠ¸', description: 'ì‡¼í•‘ ê±°ë¦¬ íƒë°©', cost: 100000, duration: 180 },
                    { time: '15:30', type: 'meal', name: 'ì˜¤í›„ í‹° - ì „í†µ í‹° í•˜ìš°ìŠ¤', description: 'ì˜êµ­ì‹ ì• í”„í„°ëˆˆ í‹°', cost: 50000, duration: 90 },
                    { time: '17:30', type: 'attraction', name: 'ë¦¬ì  íŠ¸ ìŠ¤íŠ¸ë¦¬íŠ¸', description: 'ëª…í’ˆ ì‡¼í•‘ ë° ê±´ì¶•ë¬¼ ê°ìƒ', cost: 50000, duration: 120 },
                    { time: '20:00', type: 'meal', name: 'ì €ë… - Barrafina', description: 'ë¯¸ìŠë­ ìŠ¤íƒ€ íƒ€íŒŒìŠ¤', cost: 60000, duration: 90 }
                ]
            },
            {
                day: 7,
                title: 'Day 7 - ë§ˆì§€ë§‰ ë‚  & ì¶œë°œ',
                activities: [
                    { time: '08:00', type: 'meal', name: 'ì•„ì¹¨ - í˜¸í…” ì¡°ì‹', description: 'í˜¸í…”ì—ì„œ ë§ˆì§€ë§‰ ì•„ì¹¨', cost: 15000, duration: 60 },
                    { time: '09:30', type: 'attraction', name: 'ë§ˆì§€ë§‰ ê¸°ë…í’ˆ ì‡¼í•‘', description: 'íˆë“œë¡œê³µí•­ ë©´ì„¸ì ', cost: 80000, duration: 120 },
                    { time: '12:00', type: 'meal', name: 'ì ì‹¬ - ê³µí•­ ë¼ìš´ì§€', description: 'ì¶œë°œ ì „ ê°€ë²¼ìš´ ì‹ì‚¬', cost: 35000, duration: 60 },
                    { time: '14:00', type: 'transport', name: 'ëŸ°ë˜ íˆë“œë¡œê³µí•­ ì¶œë°œ', description: 'ê·€êµ­ í•­ê³µí¸', cost: 0, duration: 700 }
                ]
            }
        ];

        // ==================== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ====================

        // ì´ ë¹„ìš© ê³„ì‚°
        function calculateTotalCost() {
            let total = 0;

            // í•­ê³µê¶Œ (ì™•ë³µ - ì²« ë²ˆì§¸ ì˜µì…˜)
            if (roundtripFlightsData && roundtripFlightsData.length > 0) {
                total += roundtripFlightsData[0].price;
            }

            // 7ì¼ ì¼ì • ë¹„ìš©
            itineraryData.forEach(day => {
                day.activities.forEach(activity => {
                    total += activity.cost;
                });
            });

            // í˜„ì§€ êµí†µ (7ì¼ íŒ¨ìŠ¤)
            total += tubeData[0].price;

            return total;
        }

        // ì´ ì‹œê°„ ê³„ì‚°
        function calculateTotalTime() {
            let totalMinutes = 0;

            itineraryData.forEach(day => {
                day.activities.forEach(activity => {
                    totalMinutes += activity.duration || 0;
                });
            });

            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;

            return `${hours}ì‹œê°„ ${minutes}ë¶„`;
        }

        // ìˆ«ìë¥¼ í•œêµ­ ì›í™” í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        function formatCurrency(amount) {
            return 'â‚©' + amount.toLocaleString('ko-KR');
        }

        // íƒ­ ì „í™˜
        function switchTab(tabId) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // í´ë¦­ëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');

            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // ì„ íƒëœ íƒ­ ì½˜í…ì¸  í‘œì‹œ
            const selectedContent = document.getElementById(tabId);
            if (selectedContent) {
                selectedContent.classList.add('active');
            }
        }

        // ì—¬í–‰ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateTrip() {
            const origin = document.getElementById('origin').value;
            const destination = document.getElementById('destination').value;

            if (origin === destination) {
                alert('ì¶œë°œì§€ì™€ ëª©ì ì§€ê°€ ê°™ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë„ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // í˜„ì¬ ì—¬í–‰ ì •ë³´ ì—…ë°ì´íŠ¸
            currentTrip.origin = origin;
            currentTrip.destination = destination;

            const originCity = cities[origin];
            const destCity = cities[destination];

            // ì§€ë„ ê²½ë¡œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('mapRoute').textContent =
                `${originCity.name} â†’ ${destCity.name}`;

            // í•­ê³µí¸ ë°ì´í„° ì¬ìƒì„±
            onewayFlightsData = generateOnewayFlightData(origin, destination);
            roundtripFlightsData = generateRoundtripFlightData(origin, destination);

            // í•­ê³µí¸ ë‹¤ì‹œ ë Œë”ë§ (ì™•ë³µ)
            const sortedRoundtrip = [...roundtripFlightsData].sort((a, b) => b.cancelled - a.cancelled);
            document.getElementById('roundtripFlightsGrid').innerHTML = sortedRoundtrip.map(renderTransportCard).join('');

            // í•­ê³µí¸ ë‹¤ì‹œ ë Œë”ë§ (í¸ë„)
            const sortedOneway = [...onewayFlightsData].sort((a, b) => b.cancelled - a.cancelled);
            document.getElementById('onewayFlightsGrid').innerHTML = sortedOneway.map(renderTransportCard).join('');

            // ì´ ë¹„ìš© ì¬ê³„ì‚° ë° ì—…ë°ì´íŠ¸
            const totalCost = calculateTotalCost();
            document.getElementById('totalCost').textContent = formatCurrency(totalCost);

            // í—¤ë” ì œëª© ì—…ë°ì´íŠ¸
            document.querySelector('header h1').textContent =
                `ğŸŒ ${originCity.name} â†’ ${destCity.name} ì—¬í–‰ í”Œë˜ë„ˆ`;

            // í˜„ì§€ êµí†µ ì„¹ì…˜ ì œëª© ì—…ë°ì´íŠ¸
            document.querySelector('.main-content .section:last-of-type h2').textContent =
                `ğŸš‡ ${destCity.name} í˜„ì§€ êµí†µ`;

            console.log(`âœˆï¸ ì—¬í–‰ ì—…ë°ì´íŠ¸: ${originCity.name} â†’ ${destCity.name}`);
        }

        // ==================== ë Œë”ë§ í•¨ìˆ˜ ====================

        // êµí†µí¸ ì¹´ë“œ ë Œë”ë§
        function renderTransportCard(transport) {
            const cancelledClass = transport.cancelled ? 'transport-card cancelled' : 'transport-card';
            const cancelledBadge = transport.cancelled ?
                `<div class="cancelled-badge">ğŸ”¥ ${transport.cancelReason}</div>` : '';
            const note = transport.note ?
                `<div style="color: var(--danger-color); font-size: 0.85rem; margin-top: 10px;">${transport.note}</div>` : '';

            return `
                <div class="${cancelledClass}">
                    ${cancelledBadge}
                    <div class="transport-icon">${transport.icon}</div>
                    <div class="transport-name">${transport.name}</div>
                    <div class="transport-price">${transport.priceStr}</div>
                    <div class="transport-details">
                        <div>â±ï¸ ${transport.duration}</div>
                        <div>ğŸ“ ${transport.details}</div>
                    </div>
                    ${note}
                </div>
            `;
        }

        // ì¼ì • ì¹´ë“œ ë Œë”ë§
        function renderDayCard(dayData) {
            const dayCost = dayData.activities.reduce((sum, activity) => sum + activity.cost, 0);

            const activitiesHTML = dayData.activities.map(activity => {
                const typeClass = activity.type === 'meal' ? 'timeline-item meal' : 'timeline-item';
                const icon = activity.type === 'meal' ? 'ğŸ½ï¸' :
                            activity.type === 'transport' ? 'âœˆï¸' :
                            activity.type === 'arrival' ? 'ğŸ›¬' : 'ğŸ›ï¸';

                return `
                    <div class="${typeClass}">
                        <div class="time">${activity.time}</div>
                        <div class="activity-details">
                            <h4>${icon} ${activity.name}</h4>
                            <p>${activity.description}</p>
                            <p class="cost">ë¹„ìš©: ${formatCurrency(activity.cost)} | â±ï¸ ${Math.floor(activity.duration / 60)}ì‹œê°„ ${activity.duration % 60}ë¶„</p>
                        </div>
                    </div>
                `;
            }).join('');

            return `
                <div class="day-card">
                    <div class="day-header">
                        <div class="day-title">ğŸ“… ${dayData.title}</div>
                        <div class="day-cost">ì¼ì¼ ë¹„ìš©: ${formatCurrency(dayCost)}</div>
                    </div>
                    <div class="timeline">
                        ${activitiesHTML}
                    </div>
                </div>
            `;
        }

        // í˜ì´ì§€ ì´ˆê¸°í™”
        function initializePage() {
            // ì´ˆê¸° ì—¬í–‰ ì •ë³´ ì„¤ì •
            const originCity = cities[currentTrip.origin];
            const destCity = cities[currentTrip.destination];

            // í—¤ë” ì œëª© ì„¤ì •
            document.querySelector('header h1').textContent =
                `ğŸŒ ${originCity.name} â†’ ${destCity.name} ì—¬í–‰ í”Œë˜ë„ˆ`;

            // ì´ ë¹„ìš© ë° ì‹œê°„ í‘œì‹œ
            const totalCost = calculateTotalCost();
            const totalTime = calculateTotalTime();

            document.getElementById('totalCost').textContent = formatCurrency(totalCost);
            document.getElementById('totalTime').textContent = totalTime;

            // ì™•ë³µ í•­ê³µí¸ ë Œë”ë§ (ì·¨ì†Œí‘œ ìš°ì„ )
            const sortedRoundtrip = [...roundtripFlightsData].sort((a, b) => b.cancelled - a.cancelled);
            document.getElementById('roundtripFlightsGrid').innerHTML = sortedRoundtrip.map(renderTransportCard).join('');

            // í¸ë„ í•­ê³µí¸ ë Œë”ë§ (ì·¨ì†Œí‘œ ìš°ì„ )
            const sortedOneway = [...onewayFlightsData].sort((a, b) => b.cancelled - a.cancelled);
            document.getElementById('onewayFlightsGrid').innerHTML = sortedOneway.map(renderTransportCard).join('');

            // êµ­ì œ ê¸°ì°¨ ë Œë”ë§
            document.getElementById('trainsGrid').innerHTML = trainsData.map(renderTransportCard).join('');

            // ì§€í•˜ì²  ë Œë”ë§
            document.getElementById('tubeGrid').innerHTML = tubeData.map(renderTransportCard).join('');

            // ë²„ìŠ¤ ë Œë”ë§
            document.getElementById('busGrid').innerHTML = busData.map(renderTransportCard).join('');

            // íƒì‹œ ë Œë”ë§
            document.getElementById('taxiGrid').innerHTML = taxiData.map(renderTransportCard).join('');

            // 7ì¼ ì¼ì • ë Œë”ë§
            document.getElementById('itineraryGrid').innerHTML = itineraryData.map(renderDayCard).join('');

            // í˜„ì§€ êµí†µ ì„¹ì…˜ ì œëª© ì„¤ì •
            document.querySelector('.main-content .section:last-of-type h2').textContent =
                `ğŸš‡ ${destCity.name} í˜„ì§€ êµí†µ`;

            console.log('âœˆï¸ ì—¬í–‰ í”Œë˜ë„ˆ ë¡œë”© ì™„ë£Œ!');
            console.log(`ì´ ë¹„ìš©: ${formatCurrency(totalCost)}`);
            console.log(`ì´ ì‹œê°„: ${totalTime}`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
