<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„œìš¸ â†’ ëŸ°ë˜ 7ì¼ ì—¬í–‰ í”Œë˜ë„ˆ</title>

    <style>
        /* ê¸°ë³¸ ë¦¬ì…‹ ë° ì „ì—­ ìŠ¤íƒ€ì¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2196F3;
            --secondary-color: #FF5722;
            --accent-color: #FFC107;
            --success-color: #4CAF50;
            --danger-color: #F44336;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f5f5f5;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.2);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* í—¤ë” */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1976D2 100%);
            color: var(--white);
            padding: 30px 40px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: 'âœˆï¸';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            right: -20px;
            top: -40px;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* ì—¬í–‰ ì •ë³´ ì„¹ì…˜ */
        .trip-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px 40px;
            background: var(--bg-light);
            border-bottom: 1px solid #e0e0e0;
        }

        .info-card {
            background: var(--white);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .info-card h3 {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-card p {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        /* ì§€ë„ ì„¹ì…˜ */
        .map-section {
            grid-column: 1 / -1;
        }

        #map {
            width: 100%;
            height: 500px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        /* ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .section {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        /* êµí†µ ì •ë³´ ì¹´ë“œ */
        .transport-grid {
            display: grid;
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .transport-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .transport-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-hover);
            transform: translateX(5px);
        }

        .transport-card.cancelled {
            border-color: var(--danger-color);
            background: linear-gradient(to right, #ffe5e5 0%, #fff 10%);
        }

        .cancelled-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger-color);
            color: var(--white);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .transport-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .transport-type {
            font-size: 1.8rem;
            margin-right: 10px;
        }

        .transport-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-dark);
        }

        .transport-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .transport-details {
            display: grid;
            gap: 8px;
            margin-top: 10px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .detail-row strong {
            color: var(--text-dark);
        }

        /* ì¶”ì²œ ì¥ì†Œ ê·¸ë¦¬ë“œ */
        .recommendations-grid {
            display: grid;
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .recommendation-card {
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .recommendation-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-hover);
            transform: scale(1.02);
        }

        .rec-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .rec-title {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .rec-rating {
            background: var(--accent-color);
            color: var(--text-dark);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .rec-category {
            color: var(--text-light);
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .rec-description {
            color: var(--text-light);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .rec-location {
            font-size: 0.85rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* íƒ­ ì‹œìŠ¤í…œ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            position: relative;
            top: 2px;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #1976D2;
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--bg-light);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* í‘¸í„° */
        footer {
            background: var(--text-dark);
            color: var(--white);
            text-align: center;
            padding: 20px;
            font-size: 0.9rem;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                padding: 20px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 0.95rem;
            }

            .trip-info {
                grid-template-columns: repeat(2, 1fr);
                padding: 20px;
                gap: 15px;
            }

            .main-content {
                padding: 20px;
                gap: 20px;
            }

            #map {
                height: 350px;
            }

            .section {
                padding: 15px;
            }

            .tabs {
                overflow-x: auto;
                scrollbar-width: none;
            }

            .tabs::-webkit-scrollbar {
                display: none;
            }

            .tab {
                font-size: 0.9rem;
                padding: 10px 15px;
            }
        }

        @media (max-width: 480px) {
            .trip-info {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.5rem;
            }

            .info-card p {
                font-size: 1.1rem;
            }
        }

        /* ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-new {
            background: var(--success-color);
            color: var(--white);
        }

        .badge-hot {
            background: var(--danger-color);
            color: var(--white);
        }

        /* API í‚¤ ì…ë ¥ ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }

        .modal-content h2 {
            margin-bottom: 15px;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .modal-content button {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .modal-content button:hover {
            background: #1976D2;
        }

        .skip-button {
            background: var(--text-light) !important;
            margin-top: 10px;
        }

        .skip-button:hover {
            background: var(--text-dark) !important;
        }
    </style>
</head>
<body>
    <!-- API í‚¤ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="apiModal" class="modal">
        <div class="modal-content">
            <h2>Google Maps API í‚¤ ì„¤ì •</h2>
            <p style="color: var(--text-light); margin-bottom: 15px;">
                ì§€ë„ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Google Maps API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
                <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">API í‚¤ ë°›ê¸°</a>
            </p>
            <input type="text" id="apiKeyInput" placeholder="AIzaSy...">
            <button onclick="saveApiKey()">ì €ì¥í•˜ê³  ì‹œì‘í•˜ê¸°</button>
            <button class="skip-button" onclick="skipApiKey()">ê±´ë„ˆë›°ê¸° (ë°ëª¨ ëª¨ë“œ)</button>
        </div>
    </div>

    <div class="container">
        <!-- í—¤ë” -->
        <header>
            <h1>âœˆï¸ ì„œìš¸ â†’ ëŸ°ë˜ 7ì¼ ì—¬í–‰ í”Œë˜ë„ˆ</h1>
            <p class="subtitle">ì™„ë²½í•œ ì—¬í–‰ì„ ìœ„í•œ ëª¨ë“  ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ</p>
        </header>

        <!-- ì—¬í–‰ ì •ë³´ -->
        <section class="trip-info">
            <div class="info-card">
                <h3>ì¶œë°œì§€</h3>
                <p>ğŸ¢ ì„œìš¸ ì‹œì²­</p>
            </div>
            <div class="info-card">
                <h3>ëª©ì ì§€</h3>
                <p>ğŸ›ï¸ ëŒ€ì˜ë°•ë¬¼ê´€</p>
            </div>
            <div class="info-card">
                <h3>ì¶œë°œ ì‹œê°„</h3>
                <p>ğŸ• ì˜¤ì „ 8:00</p>
            </div>
            <div class="info-card">
                <h3>ì—¬í–‰ ê¸°ê°„</h3>
                <p>ğŸ“… 7ì¼</p>
            </div>
            <div class="info-card">
                <h3>ì˜ˆìƒ ë„ì°©</h3>
                <p id="arrivalTime">ê³„ì‚° ì¤‘...</p>
            </div>
            <div class="info-card">
                <h3>ì´ ê±°ë¦¬</h3>
                <p id="totalDistance">ì•½ 9,000 km</p>
            </div>
        </section>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì§€ë„ ì„¹ì…˜ -->
            <section class="map-section section">
                <h2>ğŸ—ºï¸ ì—¬í–‰ ê²½ë¡œ</h2>
                <div id="map"></div>
            </section>

            <!-- êµí†µ ì •ë³´ ì„¹ì…˜ -->
            <section class="section">
                <h2>ğŸšŒ êµí†µ ì •ë³´</h2>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('flights')">í•­ê³µí¸</button>
                    <button class="tab" onclick="switchTab('trains')">ê¸°ì°¨</button>
                    <button class="tab" onclick="switchTab('buses')">ë²„ìŠ¤</button>
                </div>

                <div id="flights" class="tab-content active">
                    <div class="transport-grid" id="flightsGrid"></div>
                </div>

                <div id="trains" class="tab-content">
                    <div class="transport-grid" id="trainsGrid"></div>
                </div>

                <div id="buses" class="tab-content">
                    <div class="transport-grid" id="busesGrid"></div>
                </div>
            </section>

            <!-- ì¶”ì²œ ì¥ì†Œ ì„¹ì…˜ -->
            <section class="section">
                <h2>â­ ëŸ°ë˜ ì¶”ì²œ</h2>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('attractions')">ê´€ê´‘ì§€ TOP 10</button>
                    <button class="tab" onclick="switchTab('restaurants')">ë§›ì§‘</button>
                </div>

                <div id="attractions" class="tab-content active">
                    <div class="recommendations-grid" id="attractionsGrid"></div>
                </div>

                <div id="restaurants" class="tab-content">
                    <div class="recommendations-grid" id="restaurantsGrid"></div>
                </div>
            </section>
        </div>

        <!-- í‘¸í„° -->
        <footer>
            <p>Â© 2024 ì„œìš¸-ëŸ°ë˜ ì—¬í–‰ í”Œë˜ë„ˆ | ëª¨ë“  ì •ë³´ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤</p>
        </footer>
    </div>

    <script>
        // ==================== ë°ì´í„° ì •ì˜ ====================

        // ì—¬í–‰ ê¸°ë³¸ ì •ë³´
        const tripData = {
            origin: {
                name: 'ì„œìš¸ ì‹œì²­',
                lat: 37.5663,
                lng: 126.9779
            },
            destination: {
                name: 'ëŒ€ì˜ë°•ë¬¼ê´€ (British Museum)',
                lat: 51.5194,
                lng: -0.1270
            },
            departureTime: '08:00',
            duration: 7
        };

        // í•­ê³µí¸ ë°ì´í„° (ì·¨ì†Œëœ í•­ê³µê¶Œ ìš°ì„  í‘œì‹œ)
        const flightsData = [
            {
                id: 1,
                name: 'Korean Air KE907',
                type: 'âœˆï¸',
                price: '850,000ì›',
                duration: '11ì‹œê°„ 30ë¶„',
                departure: 'ì¸ì²œêµ­ì œê³µí•­ 08:00',
                arrival: 'íˆë“œë¡œê³µí•­ 12:30',
                stops: 'ì§í•­',
                class: 'ì´ì½”ë…¸ë¯¸',
                cancelled: true,
                cancelReason: 'ì¢Œì„ ì·¨ì†Œ ë°œìƒ - ì¦‰ì‹œ ì˜ˆì•½ ê°€ëŠ¥!'
            },
            {
                id: 2,
                name: 'British Airways BA17',
                type: 'âœˆï¸',
                price: '920,000ì›',
                duration: '11ì‹œê°„ 45ë¶„',
                departure: 'ì¸ì²œêµ­ì œê³µí•­ 09:30',
                arrival: 'íˆë“œë¡œê³µí•­ 14:15',
                stops: 'ì§í•­',
                class: 'ì´ì½”ë…¸ë¯¸',
                cancelled: true,
                cancelReason: 'íŠ¹ê°€ ì·¨ì†Œì„ - ì„ ì°©ìˆœ ë§ˆê°!'
            },
            {
                id: 3,
                name: 'Asiana Airlines OZ521',
                type: 'âœˆï¸',
                price: '780,000ì›',
                duration: '12ì‹œê°„ 20ë¶„',
                departure: 'ì¸ì²œêµ­ì œê³µí•­ 10:00',
                arrival: 'íˆë“œë¡œê³µí•­ 15:20',
                stops: 'ì§í•­',
                class: 'ì´ì½”ë…¸ë¯¸',
                cancelled: false
            },
            {
                id: 4,
                name: 'Turkish Airlines TK091',
                type: 'âœˆï¸',
                price: '650,000ì›',
                duration: '16ì‹œê°„ 40ë¶„',
                departure: 'ì¸ì²œêµ­ì œê³µí•­ 11:00',
                arrival: 'íˆë“œë¡œê³µí•­ 18:40',
                stops: 'ì´ìŠ¤íƒ„ë¶ˆ ê²½ìœ  (3ì‹œê°„ ëŒ€ê¸°)',
                class: 'ì´ì½”ë…¸ë¯¸',
                cancelled: false
            },
            {
                id: 5,
                name: 'Emirates EK322',
                type: 'âœˆï¸',
                price: '720,000ì›',
                duration: '17ì‹œê°„ 10ë¶„',
                departure: 'ì¸ì²œêµ­ì œê³µí•­ 08:30',
                arrival: 'íˆë“œë¡œê³µí•­ 16:40',
                stops: 'ë‘ë°”ì´ ê²½ìœ  (4ì‹œê°„ ëŒ€ê¸°)',
                class: 'ì´ì½”ë…¸ë¯¸',
                cancelled: false
            }
        ];

        // ê¸°ì°¨ ë°ì´í„°
        const trainsData = [
            {
                id: 1,
                name: 'KTX â†’ ì¤‘êµ­íš¡ë‹¨ì² ë„ â†’ ìœ ëŸ½ì² ë„',
                type: 'ğŸš„',
                price: '1,200,000ì›',
                duration: '9ì¼ 14ì‹œê°„',
                departure: 'ì„œìš¸ì—­ 08:00',
                arrival: 'ëŸ°ë˜ ì„¸ì¸íŠ¸ íŒí¬ë¼ìŠ¤ì—­',
                stops: 'ë¶€ì‚°, ë² ì´ì§•, ëª¨ìŠ¤í¬ë°”, ë² ë¥¼ë¦°, íŒŒë¦¬ ê²½ìœ ',
                class: 'ì¼ë°˜ì„',
                cancelled: false
            },
            {
                id: 2,
                name: 'Eurostar (íŒŒë¦¬-ëŸ°ë˜)',
                type: 'ğŸš„',
                price: '180,000ì›',
                duration: '2ì‹œê°„ 20ë¶„',
                departure: 'íŒŒë¦¬ ë¶ì—­ 14:00',
                arrival: 'ëŸ°ë˜ ì„¸ì¸íŠ¸ íŒí¬ë¼ìŠ¤ì—­ 14:20 (í˜„ì§€ì‹œê°„)',
                stops: 'ì§í†µ',
                class: 'ìŠ¤íƒ ë‹¤ë“œ',
                cancelled: false,
                note: 'â€» íŒŒë¦¬ê¹Œì§€ ë³„ë„ ì´ë™ í•„ìš”'
            }
        ];

        // ë²„ìŠ¤ ë°ì´í„°
        const busesData = [
            {
                id: 1,
                name: 'êµ­ì œ ê³ ì†ë²„ìŠ¤ (ëŒ€ë¥™íš¡ë‹¨)',
                type: 'ğŸšŒ',
                price: '450,000ì›',
                duration: '15ì¼ ì´ìƒ',
                departure: 'ì„œìš¸ê³ ì†ë²„ìŠ¤í„°ë¯¸ë„',
                arrival: 'ëŸ°ë˜ ë¹…í† ë¦¬ì•„ ì½”ì¹˜ ìŠ¤í…Œì´ì…˜',
                stops: 'ì¤‘êµ­, ì¤‘ì•™ì•„ì‹œì•„, ëŸ¬ì‹œì•„, ë™ìœ ëŸ½ ê²½ìœ ',
                class: 'ì¼ë°˜ì„',
                cancelled: false
            },
            {
                id: 2,
                name: 'National Express',
                type: 'ğŸšŒ',
                price: '25,000ì›',
                duration: '9ì‹œê°„ 30ë¶„',
                departure: 'íŒŒë¦¬ ê°ˆë¦¬ì—ë‹ˆ ë²„ìŠ¤í„°ë¯¸ë„',
                arrival: 'ëŸ°ë˜ ë¹…í† ë¦¬ì•„ ì½”ì¹˜ ìŠ¤í…Œì´ì…˜',
                stops: 'í”„ë‘ìŠ¤ êµ­ë‚´ ì—¬ëŸ¬ ë„ì‹œ ê²½ìœ ',
                class: 'ì¼ë°˜ì„',
                cancelled: false,
                note: 'â€» íŒŒë¦¬ê¹Œì§€ ë³„ë„ ì´ë™ í•„ìš”'
            }
        ];

        // ëŸ°ë˜ ê´€ê´‘ì§€ TOP 10
        const attractionsData = [
            {
                id: 1,
                name: 'ëŒ€ì˜ë°•ë¬¼ê´€ (British Museum)',
                category: 'ë°•ë¬¼ê´€',
                rating: '4.7',
                description: 'ì„¸ê³„ ìµœëŒ€ ê·œëª¨ì˜ ë°•ë¬¼ê´€ ì¤‘ í•˜ë‚˜. ë¡œì œíƒ€ ìŠ¤í†¤, ì´ì§‘íŠ¸ ë¯¸ë¼ ë“± ì¸ë¥˜ ì—­ì‚¬ì˜ ë³´ë¬¼ ì „ì‹œ. ì…ì¥ ë¬´ë£Œ!',
                lat: 51.5194,
                lng: -0.1270,
                location: 'Great Russell St, London WC1B 3DG'
            },
            {
                id: 2,
                name: 'íƒ€ì›Œ ë¸Œë¦¬ì§€ (Tower Bridge)',
                category: 'ëœë“œë§ˆí¬',
                rating: '4.6',
                description: 'ëŸ°ë˜ì˜ ìƒì§•ì ì¸ ë‹¤ë¦¬. ë¹…í† ë¦¬ì•„ ì‹œëŒ€ì˜ ê±´ì¶•ë¯¸ë¥¼ ìë‘í•˜ë©°, ë‹¤ë¦¬ ìœ„ ì „ë§ëŒ€ì—ì„œ í…œì¦ˆê°• ì „ê²½ ê°ìƒ ê°€ëŠ¥.',
                lat: 51.5055,
                lng: -0.0754,
                location: 'Tower Bridge Rd, London SE1 2UP'
            },
            {
                id: 3,
                name: 'ë¹…ë²¤ & êµ­íšŒì˜ì‚¬ë‹¹',
                category: 'ëœë“œë§ˆí¬',
                rating: '4.7',
                description: 'ëŸ°ë˜ì˜ ì•„ì´ì½˜. ê³ ë”• ì–‘ì‹ì˜ ì›…ì¥í•œ ê±´ì¶•ë¬¼ê³¼ ì„¸ê³„ì—ì„œ ê°€ì¥ ìœ ëª…í•œ ì‹œê³„íƒ‘.',
                lat: 51.5007,
                lng: -0.1246,
                location: 'Westminster, London SW1A 0AA'
            },
            {
                id: 4,
                name: 'ë²„í‚¹ì—„ ê¶ì „ (Buckingham Palace)',
                category: 'ê¶ì „',
                rating: '4.5',
                description: 'ì˜êµ­ ì™•ì‹¤ì˜ ê³µì‹ ê±°ì£¼ì§€. ìœ„ë³‘ êµëŒ€ì‹(Changing of the Guard)ì€ í•„ìˆ˜ ê´€ëŒ ì½”ìŠ¤.',
                lat: 51.5014,
                lng: -0.1419,
                location: 'London SW1A 1AA'
            },
            {
                id: 5,
                name: 'ëŸ°ë˜ ì•„ì´ (London Eye)',
                category: 'ê´€ê´‘ ëª…ì†Œ',
                rating: '4.5',
                description: 'ìœ ëŸ½ ìµœëŒ€ì˜ ëŒ€ê´€ëŒì°¨. 135m ë†’ì´ì—ì„œ ëŸ°ë˜ ì „ê²½ì„ 360ë„ íŒŒë…¸ë¼ë§ˆë¡œ ê°ìƒ.',
                lat: 51.5033,
                lng: -0.1195,
                location: 'Riverside Building, County Hall, London SE1 7PB'
            },
            {
                id: 6,
                name: 'ì½”ë²¤íŠ¸ ê°€ë“  (Covent Garden)',
                category: 'ì‡¼í•‘/ë¬¸í™”',
                rating: '4.4',
                description: 'ê±°ë¦¬ ê³µì—°ê³¼ ë‹¤ì–‘í•œ ìƒì , ë ˆìŠ¤í† ë‘ì´ ëª¨ì—¬ìˆëŠ” í™œê¸°ì°¬ ì§€ì—­. ì‡¼í•‘ê³¼ ì‹ì‚¬ë¥¼ ë™ì‹œì—!',
                lat: 51.5118,
                lng: -0.1226,
                location: 'Covent Garden, London WC2E 8RF'
            },
            {
                id: 7,
                name: 'í…Œì´íŠ¸ ëª¨ë˜ (Tate Modern)',
                category: 'ë¯¸ìˆ ê´€',
                rating: '4.6',
                description: 'í˜„ëŒ€ë¯¸ìˆ ì˜ ë©”ì¹´. í”¼ì¹´ì†Œ, ë‹¬ë¦¬ ë“± ê±°ì¥ë“¤ì˜ ì‘í’ˆë¶€í„° í˜„ëŒ€ ì„¤ì¹˜ë¯¸ìˆ ê¹Œì§€. ì…ì¥ ë¬´ë£Œ!',
                lat: 51.5076,
                lng: -0.0994,
                location: 'Bankside, London SE1 9TG'
            },
            {
                id: 8,
                name: 'í•´ë¦¬í¬í„° ìŠ¤íŠœë””ì˜¤ íˆ¬ì–´',
                category: 'í…Œë§ˆíŒŒí¬',
                rating: '4.8',
                description: 'í•´ë¦¬í¬í„° íŒ¬ì´ë¼ë©´ í•„ìˆ˜! ì‹¤ì œ ì´¬ì˜ ì„¸íŠ¸ì™€ ì†Œí’ˆ, ì˜ìƒì„ ì§ì ‘ ë³¼ ìˆ˜ ìˆëŠ” ë§ˆë²• ê°™ì€ ê²½í—˜.',
                lat: 51.6903,
                lng: -0.4180,
                location: 'Studio Tour Dr, Leavesden, Watford WD25 7LR'
            },
            {
                id: 9,
                name: 'ìº ë“  ë§ˆì¼“ (Camden Market)',
                category: 'ì‹œì¥/ì‡¼í•‘',
                rating: '4.3',
                description: 'ë…íŠ¹í•œ ë¶„ìœ„ê¸°ì˜ ë²¼ë£©ì‹œì¥. ë¹ˆí‹°ì§€ ì˜ë¥˜, ìˆ˜ê³µì˜ˆí’ˆ, ì„¸ê³„ ê°êµ­ ìŒì‹ ë“± ë‹¤ì–‘í•œ ë³¼ê±°ë¦¬.',
                lat: 51.5417,
                lng: -0.1460,
                location: 'Camden Lock Pl, London NW1 8AF'
            },
            {
                id: 10,
                name: 'í•˜ì´ë“œ íŒŒí¬ (Hyde Park)',
                category: 'ê³µì›',
                rating: '4.6',
                description: 'ëŸ°ë˜ ì¤‘ì‹¬ë¶€ì˜ ê±°ëŒ€í•œ ë…¹ìƒ‰ ì˜¤ì•„ì‹œìŠ¤. ì‚°ì±…, í”¼í¬ë‹‰, ë³´íŠ¸ íƒ€ê¸° ë“± ì—¬ìœ ë¡œìš´ ì‹œê°„ì„ ì¦ê¸°ê¸°ì— ì™„ë²½.',
                lat: 51.5073,
                lng: -0.1657,
                location: 'London W2 2UH'
            }
        ];

        // ë§›ì§‘ ì¶”ì²œ (í‰ì  4.0 ì´ìƒ)
        const restaurantsData = [
            {
                id: 1,
                name: 'Dishoom Covent Garden',
                category: 'ì¸ë„ ìš”ë¦¬',
                rating: '4.5',
                description: 'ë­„ë°”ì´ ìŠ¤íƒ€ì¼ì˜ ì •í†µ ì¸ë„ ìš”ë¦¬. íŠ¹íˆ ë¸Œë ‰í¼ìŠ¤íŠ¸ ë‚˜ì•ˆ ë¡¤ê³¼ ì¹˜í‚¨ ë£¨ë¹„ ì¹´ë ˆê°€ ì¸ê¸° ë©”ë‰´.',
                lat: 51.5118,
                lng: -0.1223,
                location: '12 Upper St Martin\'s Ln, London WC2H 9FB'
            },
            {
                id: 2,
                name: 'Honest Burgers',
                category: 'ë²„ê±°',
                rating: '4.4',
                description: 'ì˜êµ­ì‚° ì†Œê³ ê¸°ë¡œ ë§Œë“  ìœ¡ì¦™ ê°€ë“í•œ ìˆ˜ì œ ë²„ê±° ì „ë¬¸ì . ë¡œì¦ˆë§ˆë¦¬ ê°ìíŠ€ê¹€ë„ í•„ìˆ˜!',
                lat: 51.5118,
                lng: -0.1250,
                location: '75 Charing Cross Rd, London WC2H 0NE'
            },
            {
                id: 3,
                name: 'Sketch',
                category: 'íŒŒì¸ ë‹¤ì´ë‹',
                rating: '4.6',
                description: 'ë¯¸ìŠë­ ë³„ ë ˆìŠ¤í† ë‘. ì˜ˆìˆ ì‘í’ˆ ê°™ì€ ì¸í…Œë¦¬ì–´ì™€ í˜ì‹ ì ì¸ ìš”ë¦¬ë¡œ ìœ ëª…. í•‘í¬ ë£¸ ì• í”„í„°ëˆˆ í‹° ì¶”ì²œ!',
                lat: 51.5145,
                lng: -0.1405,
                location: '9 Conduit St, London W1S 2XG'
            },
            {
                id: 4,
                name: 'Flat Iron Square',
                category: 'ìŠ¤í…Œì´í¬',
                rating: '4.3',
                description: 'ê°€ì„±ë¹„ ìµœê³ ì˜ ìŠ¤í…Œì´í¬ ì „ë¬¸ì . ë¶€ë“œëŸ¬ìš´ í”Œë« ì•„ì´ì–¸ ìŠ¤í…Œì´í¬ê°€ ë‹¨ëˆ 12íŒŒìš´ë“œ!',
                lat: 51.5045,
                lng: -0.0925,
                location: '66-68 Southwark St, London SE1 0AS'
            },
            {
                id: 5,
                name: 'Borough Market',
                category: 'í‘¸ë“œ ë§ˆì¼“',
                rating: '4.7',
                description: 'ëŸ°ë˜ ìµœê³ ì˜ ì‹ì¬ë£Œ ì‹œì¥. ì‹ ì„ í•œ ì¹˜ì¦ˆ, ë¹µ, í•´ì‚°ë¬¼ë¶€í„° ì„¸ê³„ ê°êµ­ì˜ ê¸¸ê±°ë¦¬ ìŒì‹ê¹Œì§€!',
                lat: 51.5055,
                lng: -0.0909,
                location: '8 Southwark St, London SE1 1TL'
            },
            {
                id: 6,
                name: 'Padella',
                category: 'ì´íƒˆë¦¬ì•ˆ',
                rating: '4.6',
                description: 'ìˆ˜ì œ íŒŒìŠ¤íƒ€ì˜ ì„±ì§€. ë§¤ì¼ ì‹ ì„ í•˜ê²Œ ë§Œë“œëŠ” íŒŒìŠ¤íƒ€ê°€ ì¸ìƒì . ì ì‹¬ì‹œê°„ ì›¨ì´íŒ… ê°ì˜¤!',
                lat: 51.5051,
                lng: -0.0907,
                location: '6 Southwark St, London SE1 1TQ'
            },
            {
                id: 7,
                name: 'Hoppers',
                category: 'ìŠ¤ë¦¬ë‘ì¹´ ìš”ë¦¬',
                rating: '4.4',
                description: 'ëŸ°ë˜ì—ì„œ ì¦ê¸°ëŠ” ì´êµ­ì ì¸ ìŠ¤ë¦¬ë‘ì¹´ ìš”ë¦¬. ì½”ì½”ë„› íŒ¬ì¼€ì´í¬ì¸ í˜¸í¼ìŠ¤(Hoppers)ê°€ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´.',
                lat: 51.5138,
                lng: -0.1308,
                location: '49 Frith St, London W1D 4SG'
            },
            {
                id: 8,
                name: 'Duck & Waffle',
                category: 'ì˜êµ­ì‹ ëª¨ë˜',
                rating: '4.5',
                description: '40ì¸µ ë†’ì´ì˜ 24ì‹œê°„ ì˜ì—… ë ˆìŠ¤í† ë‘. ëŸ°ë˜ ì•¼ê²½ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” ì‹œê·¸ë‹ˆì²˜ ë•ì•¤ì™€í”Œ ìš”ë¦¬.',
                lat: 51.5151,
                lng: -0.0797,
                location: '110 Bishopsgate, London EC2N 4AY'
            },
            {
                id: 9,
                name: 'Bao Soho',
                category: 'íƒ€ì´ì™„ ìš”ë¦¬',
                rating: '4.3',
                description: 'íƒ€ì´ì™„ ì „í†µ ì°ë¹µ(Bao) ì „ë¬¸ì . ì«„ê¹ƒí•œ ë¹µê³¼ ë‹¤ì–‘í•œ ì†ì¬ë£Œì˜ ì¡°í™”ê°€ í™˜ìƒì !',
                lat: 51.5136,
                lng: -0.1322,
                location: '53 Lexington St, London W1F 9AS'
            },
            {
                id: 10,
                name: 'Barrafina',
                category: 'ìŠ¤í˜ì¸ íƒ€íŒŒìŠ¤',
                rating: '4.5',
                description: 'ë¯¸ìŠë­ ìŠ¤íƒ€ íƒ€íŒŒìŠ¤ ë°”. ì‹ ì„ í•œ í•´ì‚°ë¬¼ê³¼ ì •í†µ ìŠ¤í˜ì¸ íƒ€íŒŒìŠ¤ë¥¼ ì¹´ìš´í„°ì—ì„œ ì¦ê¸°ëŠ” íŠ¹ë³„í•œ ê²½í—˜.',
                lat: 51.5142,
                lng: -0.1273,
                location: '10 Adelaide St, London WC2N 4HZ'
            }
        ];

        // ==================== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ====================

        // ë„ì°© ì‹œê°„ ê³„ì‚° (í‰ê·  ë¹„í–‰ ì‹œê°„ ê¸°ì¤€)
        function calculateArrivalTime() {
            const avgFlightHours = 11.5; // í‰ê·  11.5ì‹œê°„
            const departureHour = 8;
            const arrivalHour = (departureHour + avgFlightHours) % 24;
            const localTimeDiff = -9; // ëŸ°ë˜ì€ ì„œìš¸ë³´ë‹¤ 9ì‹œê°„ ëŠë¦¼ (ê²¨ìš¸ ê¸°ì¤€)
            const localArrivalHour = (arrivalHour + localTimeDiff + 24) % 24;

            return `ì•½ ${Math.floor(localArrivalHour)}:${((localArrivalHour % 1) * 60).toFixed(0).padStart(2, '0')} (ëŸ°ë˜ í˜„ì§€ì‹œê°„)`;
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function switchTab(tabId) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(btn => {
                if (btn.textContent.includes('í•­ê³µí¸') && tabId === 'flights' ||
                    btn.textContent.includes('ê¸°ì°¨') && tabId === 'trains' ||
                    btn.textContent.includes('ë²„ìŠ¤') && tabId === 'buses' ||
                    btn.textContent.includes('ê´€ê´‘ì§€') && tabId === 'attractions' ||
                    btn.textContent.includes('ë§›ì§‘') && tabId === 'restaurants') {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // ì„ íƒëœ íƒ­ ì½˜í…ì¸ ë§Œ í‘œì‹œ
            const selectedContent = document.getElementById(tabId);
            if (selectedContent) {
                selectedContent.classList.add('active');
            }
        }

        // ==================== ë Œë”ë§ í•¨ìˆ˜ ====================

        // êµí†µí¸ ì¹´ë“œ ë Œë”ë§
        function renderTransportCard(transport) {
            const cancelledClass = transport.cancelled ? 'transport-card cancelled' : 'transport-card';
            const cancelledBadge = transport.cancelled ?
                `<div class="cancelled-badge">ğŸ”¥ ì·¨ì†Œí‘œ</div>` : '';
            const note = transport.note ?
                `<div class="detail-row"><span style="color: var(--danger-color);">${transport.note}</span></div>` : '';
            const cancelReason = transport.cancelled && transport.cancelReason ?
                `<div class="detail-row"><span style="color: var(--danger-color); font-weight: 600;">âš¡ ${transport.cancelReason}</span></div>` : '';

            return `
                <div class="${cancelledClass}">
                    ${cancelledBadge}
                    <div class="transport-header">
                        <div style="display: flex; align-items: center;">
                            <span class="transport-type">${transport.type}</span>
                            <span class="transport-name">${transport.name}</span>
                        </div>
                        <div class="transport-price">${transport.price}</div>
                    </div>
                    <div class="transport-details">
                        ${cancelReason}
                        <div class="detail-row">
                            <span><strong>ì†Œìš”ì‹œê°„:</strong> ${transport.duration}</span>
                        </div>
                        <div class="detail-row">
                            <span><strong>ì¶œë°œ:</strong> ${transport.departure}</span>
                        </div>
                        <div class="detail-row">
                            <span><strong>ë„ì°©:</strong> ${transport.arrival}</span>
                        </div>
                        <div class="detail-row">
                            <span><strong>ê²½ìœ :</strong> ${transport.stops}</span>
                        </div>
                        <div class="detail-row">
                            <span><strong>ë“±ê¸‰:</strong> ${transport.class}</span>
                        </div>
                        ${note}
                    </div>
                </div>
            `;
        }

        // ì¶”ì²œ ì¥ì†Œ ì¹´ë“œ ë Œë”ë§
        function renderRecommendationCard(place, index) {
            const badge = index < 3 ? '<span class="badge badge-hot">HOT</span>' :
                         index < 5 ? '<span class="badge badge-new">NEW</span>' : '';

            return `
                <div class="recommendation-card" onclick="focusOnMap(${place.lat}, ${place.lng}, '${place.name}')">
                    <div class="rec-header">
                        <div>
                            <div class="rec-title">${index + 1}. ${place.name}${badge}</div>
                            <div class="rec-category">ğŸ“ ${place.category}</div>
                        </div>
                        <div class="rec-rating">â­ ${place.rating}</div>
                    </div>
                    <div class="rec-description">${place.description}</div>
                    <div class="rec-location">ğŸ“Œ ${place.location}</div>
                </div>
            `;
        }

        // ë°ì´í„° ë Œë”ë§ ì´ˆê¸°í™”
        function initializeContent() {
            // ë„ì°© ì‹œê°„ ê³„ì‚° ë° í‘œì‹œ
            document.getElementById('arrivalTime').textContent = calculateArrivalTime();

            // í•­ê³µí¸ ë Œë”ë§ (ì·¨ì†Œí‘œ ìš°ì„  ì •ë ¬)
            const sortedFlights = [...flightsData].sort((a, b) => b.cancelled - a.cancelled);
            document.getElementById('flightsGrid').innerHTML = sortedFlights.map(renderTransportCard).join('');

            // ê¸°ì°¨ ë Œë”ë§
            document.getElementById('trainsGrid').innerHTML = trainsData.map(renderTransportCard).join('');

            // ë²„ìŠ¤ ë Œë”ë§
            document.getElementById('busesGrid').innerHTML = busesData.map(renderTransportCard).join('');

            // ê´€ê´‘ì§€ ë Œë”ë§
            document.getElementById('attractionsGrid').innerHTML = attractionsData.map((place, idx) =>
                renderRecommendationCard(place, idx)
            ).join('');

            // ë§›ì§‘ ë Œë”ë§
            document.getElementById('restaurantsGrid').innerHTML = restaurantsData.map((place, idx) =>
                renderRecommendationCard(place, idx)
            ).join('');
        }

        // ==================== Google Maps ì´ˆê¸°í™” ====================

        let map;
        let markers = [];

        function initMap() {
            // ì§€ë„ ìƒì„± (ëŸ°ë˜ ì¤‘ì‹¬ìœ¼ë¡œ)
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5,
                center: { lat: 50, lng: 30 }, // ì„œìš¸ê³¼ ëŸ°ë˜ ì¤‘ê°„ ì§€ì 
                styles: [
                    {
                        featureType: 'poi',
                        elementType: 'labels',
                        stylers: [{ visibility: 'off' }]
                    }
                ]
            });

            // ì„œìš¸ ë§ˆì»¤
            const seoulMarker = new google.maps.Marker({
                position: { lat: tripData.origin.lat, lng: tripData.origin.lng },
                map: map,
                title: tripData.origin.name,
                icon: {
                    url: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
                }
            });

            // ëŸ°ë˜ ë§ˆì»¤
            const londonMarker = new google.maps.Marker({
                position: { lat: tripData.destination.lat, lng: tripData.destination.lng },
                map: map,
                title: tripData.destination.name,
                icon: {
                    url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
                }
            });

            // ê²½ë¡œ ê·¸ë¦¬ê¸° (ê³¡ì„ )
            const flightPath = new google.maps.Polyline({
                path: [
                    { lat: tripData.origin.lat, lng: tripData.origin.lng },
                    { lat: tripData.destination.lat, lng: tripData.destination.lng }
                ],
                geodesic: true,
                strokeColor: '#2196F3',
                strokeOpacity: 0.8,
                strokeWeight: 3,
                icons: [{
                    icon: {
                        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
                    },
                    offset: '100%'
                }]
            });
            flightPath.setMap(map);

            // ê´€ê´‘ì§€ ë§ˆì»¤ ì¶”ê°€
            attractionsData.forEach((place, index) => {
                const marker = new google.maps.Marker({
                    position: { lat: place.lat, lng: place.lng },
                    map: map,
                    title: place.name,
                    label: {
                        text: String(index + 1),
                        color: 'white',
                        fontWeight: 'bold'
                    },
                    icon: {
                        url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'
                    }
                });

                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="padding: 10px;">
                            <h3 style="margin: 0 0 5px 0;">${place.name}</h3>
                            <p style="margin: 0; color: #666;">${place.category}</p>
                            <p style="margin: 5px 0 0 0; font-weight: 600;">â­ ${place.rating}</p>
                        </div>
                    `
                });

                marker.addListener('click', () => {
                    // ëª¨ë“  infoWindow ë‹«ê¸°
                    markers.forEach(m => m.infoWindow.close());
                    // í˜„ì¬ infoWindow ì—´ê¸°
                    infoWindow.open(map, marker);
                });

                markers.push({ marker, infoWindow });
            });
        }

        // ì§€ë„ì—ì„œ íŠ¹ì • ìœ„ì¹˜ì— í¬ì»¤ìŠ¤
        function focusOnMap(lat, lng, name) {
            if (map) {
                map.setCenter({ lat, lng });
                map.setZoom(15);

                // í•´ë‹¹ ë§ˆì»¤ì˜ infoWindow ì—´ê¸°
                const targetMarker = markers.find(m =>
                    m.marker.getPosition().lat() === lat &&
                    m.marker.getPosition().lng() === lng
                );

                if (targetMarker) {
                    // ëª¨ë“  infoWindow ë‹«ê¸°
                    markers.forEach(m => m.infoWindow.close());
                    // íƒ€ê²Ÿ infoWindow ì—´ê¸°
                    targetMarker.infoWindow.open(map, targetMarker.marker);
                }
            }
        }

        // ==================== API í‚¤ ê´€ë¦¬ ====================

        function saveApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            if (apiKey) {
                localStorage.setItem('googleMapsApiKey', apiKey);
                document.getElementById('apiModal').classList.remove('active');
                loadGoogleMapsScript(apiKey);
            } else {
                alert('API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        function skipApiKey() {
            document.getElementById('apiModal').classList.remove('active');
            document.getElementById('map').innerHTML = `
                <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; background: var(--bg-light);">
                    <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ—ºï¸</div>
                    <h3 style="margin-bottom: 10px; color: var(--text-dark);">ë°ëª¨ ëª¨ë“œ</h3>
                    <p style="color: var(--text-light); text-align: center; max-width: 400px;">
                        Google Maps API í‚¤ë¥¼ ì„¤ì •í•˜ë©´<br>ì¸í„°ë™í‹°ë¸Œ ì§€ë„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <button onclick="showApiModal()" style="margin-top: 20px; padding: 10px 20px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                        API í‚¤ ì„¤ì •í•˜ê¸°
                    </button>
                </div>
            `;
        }

        function showApiModal() {
            document.getElementById('apiModal').classList.add('active');
        }

        function loadGoogleMapsScript(apiKey) {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        }

        // ==================== ì´ˆê¸°í™” ====================

        document.addEventListener('DOMContentLoaded', () => {
            // ì½˜í…ì¸  ë Œë”ë§
            initializeContent();

            // API í‚¤ í™•ì¸
            const savedApiKey = localStorage.getItem('googleMapsApiKey');
            if (savedApiKey) {
                loadGoogleMapsScript(savedApiKey);
            } else {
                // API í‚¤ê°€ ì—†ìœ¼ë©´ ëª¨ë‹¬ í‘œì‹œ
                document.getElementById('apiModal').classList.add('active');
            }

            // ì„±ëŠ¥ ìµœì í™”: ì´ë¯¸ì§€ lazy loading ì ìš© (í•„ìš”ì‹œ)
            if ('loading' in HTMLImageElement.prototype) {
                const images = document.querySelectorAll('img[loading="lazy"]');
                images.forEach(img => {
                    img.src = img.dataset.src;
                });
            }

            // ì´ˆê¸° ë¡œë”© ì™„ë£Œ ë¡œê·¸
            console.log('âœˆï¸ ì—¬í–‰ í”Œë˜ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì™„ë£Œ!');
            console.log(`ì¶œë°œ: ${tripData.origin.name}`);
            console.log(`ëª©ì ì§€: ${tripData.destination.name}`);
            console.log(`ì´ ${flightsData.length}ê°œ í•­ê³µí¸, ${attractionsData.length}ê°œ ê´€ê´‘ì§€, ${restaurantsData.length}ê°œ ë§›ì§‘ ì •ë³´ ë¡œë“œë¨`);
        });

        // í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ì‹œ ì„±ëŠ¥ ìµœì í™”
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // í˜ì´ì§€ê°€ ë°±ê·¸ë¼ìš´ë“œë¡œ ê°ˆ ë•Œ ë¦¬ì†ŒìŠ¤ ì ˆì•½
                console.log('í˜ì´ì§€ ë°±ê·¸ë¼ìš´ë“œ ì „í™˜ - ë¦¬ì†ŒìŠ¤ ìµœì í™” í™œì„±í™”');
            } else {
                // í˜ì´ì§€ê°€ ë‹¤ì‹œ í™œì„±í™”ë  ë•Œ
                console.log('í˜ì´ì§€ í™œì„±í™” - ì •ìƒ ë™ì‘ ì¬ê°œ');
            }
        });
    </script>
</body>
</html>